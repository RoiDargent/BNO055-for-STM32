# BNO055 STM32 HAL Library

This library is designed to interface the Bosch BNO055 9-axis Absolute Orientation Sensor (IMU) with **STM32** microcontrollers using the **HAL (Hardware Abstraction Layer)** library.

It features a simple, modular, and easy-to-use architecture. It supports reading raw Accelerometer, Gyroscope, and Magnetometer data, as well as fused Euler Angles and Quaternion data.

##  Features

* **Easy Initialization:** Single function setup and mode selection (`BNO_Init`).
* **Multi-Mode Support:** Supports all operation modes (NDOF, ACCONLY, MAGONLY, IMUPLUS, etc.).
* **Full Data Access:**
    * Raw Accelerometer, Gyroscope, Magnetometer data.
    * Fused Euler Angles (Heading, Roll, Pitch).
    * Quaternion data.
    * Linear Acceleration and Gravity vectors.
    * Temperature data.
* **Calibration Management:** Functions to read and restore calibration offsets (essential for retaining calibration across resets).
* **Axis Configuration:** Remap axes based on the sensor's mounting position (Axis Remap).
* **External Crystal:** Option to enable/disable external crystal usage for better accuracy.

##  Requirements

* STM32 Microcontroller (F1, F4, G4, H7, etc.)
* STM32 HAL Library
* I2C Connectivity

## Usage Example

The following example demonstrates how to initialize the sensor in NDOF (Nine Degrees of Freedom) mode and read Euler angles.

```c
/* Ensure your I2C Handle is defined (Usually generated by STM32CubeMX) */
extern I2C_HandleTypeDef hi2c1;

float euler_angles[3]; // [0]: Heading, [1]: Roll, [2]: Pitch
float acc_data[3];

void Setup_BNO055(void) {
    /* Initialize Sensor (with default address and NDOF mode) */
    /* Check the return value for errors */
    if(BNO_Init(&hi2c1, BNO_MODE_NDOF) != BNO_OK) {
        // Error handling: Sensor not found or initialization failed
        Error_Handler();
    }
    
    /* Optional: Use external crystal for better accuracy */
    setExtCrystalUse(true);
}

void Read_Sensor_Data(void) {
    /* Read Euler Angles (in Degrees) */
    readEuler(euler_angles);
    
    /* Read Acceleration Data (in m/s^2) */
    readAccelleration(acc_data);
    
    // Use the data...
    // printf("Heading: %.2f\n", euler_angles[0]);
}´´´

## Important Notes
HAL Delay: The library uses HAL_Delay() for timing requirements during mode switches. Be cautious when calling these functions inside Interrupt Service Routines (ISRs).
I2C Timeout: The default timeout is 100ms. If you experience I2C communication errors, consider increasing BNO055_I2C_TIMEOUT in bno055.h.
## License
This project is open-source. Feel free to use and modify it as needed.

